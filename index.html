<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ColtJS MV* Framework</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link href="stylesheets/twilight.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <script src="javascripts/rainbow.min.js"></script>
    <script src="javascripts/generic.js"></script>
    <script src="javascripts/html.js"></script>
    <script src="javascripts/css.js"></script>
    <script src="javascripts/javascript.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <script>
        window.onhashchange = function () {
            var newtop = $(window).scrollTop()-80;
            $(window).scrollTop(newtop);
        };
        
        window.onload = function () {
            var newtop = $(window).scrollTop()-80;
            $(window).scrollTop(newtop);
        };
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/Fluidbyte/ColtJS">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/Fluidbyte/ColtJS/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/Fluidbyte/ColtJS/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Coltjs</h1>
          <p>Simple, efficient, modular JavaScript framework</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/Fluidbyte">Fluidbyte</a> and <a href="https://github.com/theprivileges">theprivileges</a></span>
          <!--<span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>-->
        </div>

        <h1>ColtJS Modular Framework</h1>

<hr><p>ColtJS is a simple framework allowing for easy deployment of JavaScript Applications using Asynchronous Module Definition (AMD). It's only dependency is <a target="_blank" href="http://www.requirejs.org">RequireJS</a>. The central concept behind behind 
    Colt is simplicity. The framework is built to be lightweight, flexible, and highly efficient.</p>
    
<p>There are plenty Swiss-Army-Knife frameworks out there, Colt aims to give a solid, reliable foundation with a minimal footprint and set of tools which are truly needed. It is easily expandable with <a target="_blank" href="https://github.com/Fluidbyte/ColtJS/tree/master/_utils">utils</a> that 
    plug into the system and are only called when and if they are needed.
</p>

<p>Beyond the basic structuring and handling of module, the framework includes methods for handling the following:
<ul>
    <li><a href="#routing">Routing &amp; Navigation</a></li>
    <li><a href="#templates">Templates &amp; Rendering</a></li>
    <li><a href="#models">Models &amp; Data</a></li>
    <li><a href="#utils-dependencies">Utilities &amp; dependencies</a></li>
    <li><a href="#access">Cross-Module Accessibility</a></li>
    <li><a href="#passing-data">URL Data Parsing</a></li>
    <li><a href="#events">Event Binding</a></li>
    <li><a href="#ajax">AJAX</a></li>
    <li><a href="#persistent-storage">Persistent Storage</a></li>
    <li><a href="#pub-sub">Pub/Sub</a></li>
</ul>

<p>The current version supports all modern browsers (including IE8 and above) but can easily be adapted to work with older browsers if needed.</p>

<hr><h2>Get Started Quickly</h2>

<p>If you're like most dev's hands-on is the best way to get up-to-speed. I highly suggest <a href="https://github.com/Fluidbyte/ColtJS/tree/master/demo">downloading or digging through the demo</a>. It's a very simple 
    implementation which can easily be adapted as a starting point for a project and outlines the core functionality and usage of the ColtJS framework.
</p>

<h2>The Boilerplate</h2>
<p><strong>There is also a <a href="https://github.com/Fluidbyte/ColtJS/tree/boilerplate" target="_blank">Codiad Boilerplate</a> which allows for quick startup on new apps and is a great way 
    to get up and running quickly.</strong>
</p>

<h2>Bower Package</h2>
<p>ColtJS also has a Bower package which can be installed via <code>bower install coltjs</code>.</p>

<h2>Getting Started Video</h2>

<iframe width="630" height="354" src="http://www.youtube.com/embed/f789qUYZCJE" frameborder="0" allowfullscreen></iframe>

<hr><h2>Usage</h2>

<p>The framework is designed to be simple to implement, utilizing the modules to define how the application functions. The modules tell the system when they should be loaded into 
DOM via routes, what events to bind to, and any other scripts/utils to load as dependencies. </p>

<p>Modules should be named the same as their object, and likewise if a template is going to be used the name of that file (in the <code>/templates</code> directory) should also match the module 
name. You can also specify the template by specifying the <code>template</code> property and providing code directly in the module.</p>

<p>An example of the structure for a simple module is below:</p>

<pre><code data-language="javascript">// Wrap the module in define() + anon function for RequireJS
define(function(){    

    var module_name = {

        // Specify path to dependencies using RequireJS convention, base path
        dependencies: {
            'some_utility': 'utils/some_utility'
        },

        // Bind events
        events: {
            'click .something': 'doSomething'
        },

        // Sets the routes in which this module should load
        routes: {
            '' : 'renderModuleName',
            'route_to_module': 'renderModuleName'
        },

        // Handles rendering of the module
        renderModuleName: function(){

            // Setup data for template
            var data = {
                title: "Module Name",
                content: "Lorem Ipsum Dolor Sit Amet...",
            };

            // Render template
            Colt.render(this,data);
        },

        // Example of a method of the module object
        doSomething: function(){
            // Console logs the current module scope
            console.log(this);
        }

    };

    // Return the module object
    return module_name;

});
</code></pre>

<p>Modules should be given elements on the <code>index.html</code> (or default page) with the id set to the <code>module_name</code>.</p>

<p>Loading up the framework using RequireJS can be done by simply including the RequireJS source in the <code>index.html</code> file:</p>

<pre><code data-language="html">&lt;script src="js/libs/require.js" data-main="js/main"&gt;
</code></pre>

<p>Then setting up <code>main.js</code> similar to the following, specifying the path to <code>Colt</code> and any other libraries utilized, then defining 
the modules as an array and finally calling <code>Colt.init()</code>:</p>

<pre><code data-language="javascript">require.config({
    baseUrl: "js/",
    paths: {
        colt:       'libs/colt'
        ...additional libraries...
    }
});

define(['colt'], function (Colt) {

    // Define all of the modules
    Colt.modules = [
        'modules/module_name',
        ...additional modules...
    ];

    // Initialize application 
    Colt.init(); 

});
</code></pre>


<a name="templates"></a>
<hr>
<h2>Templates &amp; Rendering</h2>

<p>Templates should be placed in the <code>/templates</code> directory and given the same file name as the module and use the <code>.tpl</code> extension.</p>

<p>ColtJS includes basic data replacement using Mustache-style tags, for example:</p>

<pre><code data-language="html">&lt;h1&gt;{{title}}&lt;/h1&gt;
&lt;p&gt;{{content}}&lt;/p&gt;
</code></pre>

<p>If another templating engine is required, simply pass it into the <code>main.js</code> file, then replace the render function. For example, using <a href="https://github.com/janl/mustache.js">MustacheJS</a>:</p>

<pre><code data-language="javascript">require.config({
    baseUrl: "js/",
    paths: {
        colt:       'libs/colt',
        mustache:   'libs/mustache'
    }
});

define(['colt','mustache'], function (Colt,Mustache) {

    // Define all of the modules
    Colt.modules = [
        'modules/module_name',
        ...additional modules...
    ];

    // Define custom render to use Mustache
    Colt.render = function (scope,data) {
        var template = scope.template,
            rendered = Mustache.render(template,data);

        // Render to DOM
        document.getElementById(scope.mid).innerHTML = rendered;
        document.getElementById(scope.mid).style.display = "block";

        // Build Event Listeners
        this.delegateEvents(scope.events, scope);
    };

    // Initialize application 
    Colt.init(); 

});
</code></pre>

<p>Colt also has an <code>unrender</code> method which is used to remove unused modules. If, for instance, custom transitions were being used this could be modified similar to the above Mustache example to 
    act on the module during this process:
</p>

<pre><code data-language="javascript">require.config({
    baseUrl: "js/",
    paths: {
        colt:       'libs/colt',
        jquery:     'libs/jquery'
    }
});

define(['colt','jquery'], function (Colt,$) {

    // Define all of the modules
    Colt.modules = [
        'modules/module_name',
        ...additional modules...
    ];
    
    // Define custom render to use transition in...
    Colt.render = function (scope, data) {
        var template = scope.template,
        // Replace any mustache-style {{VAR}}'s
        rendered = template.replace(/\{\{([^}]+)\}\}/g, function (i, match) {
            return data[match];
        });

        // Render to DOM & Show Element
        $('#'+scope.mid).fadeIn(300);

        // Build Event Listeners
        this.delegateEvents(scope.events, scope);
    }

    // Define custom unrender to use transition out...
    Colt.unrender = function (module_name) {
        $('#'+module_name).fadeOut(300);
    };

    // Initialize application 
    Colt.init(); 

});
</code></pre>


<a name="models"></a>
<hr>
<h2>Models &amp; Data</h2>

<p>Colt utilizes a simple structure for working with models:</p>

<pre><code data-language="javascript">var model = Colt.model({
    name: "model_name",
    data: { ...data... },
    url: "/path/to/api",
    onchange: function(data) { 
        // Gets fired whenever model data changes
        ...change event handler... 
    },
    onsync: function(response) {
        // Gets fired whenever a sync event occurs, returns:
        // { status: "success", data: { ...response data... } }
        // or
        // { status: "error", data: { ...xhr information... } }
        ...sync event handler...
    }
});</code></pre>

<p>The above would create a model and return it for variable assignment. Then to access the model you can use the variable assignment, or the following:</p>

<pre><code data-language="javascript">Colt.model("model_name");</code></pre>

<p>With only the name specified, the model is returned. It's data can be accessed by appending <code>.data</code> to the variable assignment, or via:

<pre><code data-language="javascript">// Returns the full model
Colt.model("model_name");
// Returns model data
Colt.model("model_name").data();
</code></pre>

<p>The model's data can be changed via:</p>

<pre><code data-language="javascript">Colt.model("model_name", { ...data-obj... });</code></pre>

<p>The model can then be removed by providing <code>null</code> for the <code>data</code> parameter:</p>

<pre><code data-language="javascript">Colt.model("model_name", null);</code></pre>

<h3>RESTful API Connectivity</h3>

<p>Models automatically are given four methods to connect with the url or endpoint supplied in definition:</p>

<pre><code data-language="javascript">// GET request, will then set the data of the model on success
Colt.model("model_name").get();
// POST request
Colt.model("model_name").post();
// PUT request
Colt.model("model_name").put();
// DELETE request, will then pass back `null` data on success, deleting the local model as well
Colt.model("model_name").delete();
</code></pre>

<p>The <code>url</code> parameter will be parsed for data matches before the request is called, so for example <code>/path/to/api/{foo}</code> would replace the <code>{foo}</code> 
    with it's corresponding data attribute.
</p>

<p>The framework defaults to the core <code>Colt.ajax()</code> method through the <code>Colt.sync()</code> handler. This can be overwritten globally, or 
a model can be set to perform specific actions by overwriting the defaults. For example, to overwrite post on the aforementioned model:
</p>

<pre><code data-language="javascript">var model = Colt.model("model_name");
model.post = function() {
    ...custom hanlder...
});</code></pre>


<h3>Subscribe to Change and Sync Events</h3>

<p>In addition to setting default <code>onchange</code> and <code>onsync</code> callbacks, the framework automatically fires a <code>publish()</code> call on these events.</p>

<p>This means you can create subscriptions to handle these events in lieu of (or in addition to) the model's defaults. For example, <code>change</code> publishes can be accessed via:</p>

<pre><code data-language="javascript">Colt.subscribe("model_{MODEL-NAME}_change", function(data){
    ...handle data...
});
</code></pre>

<p>Sync uses a similar publisher:</p>

<pre><code data-language="javascript">Colt.subscribe("model_{MODEL-NAME}_sync", function(response){
    ...handle response...
});
</code></pre>

<p>Both handlers return the same data as the default <code>onchange</code> and <code>onsync</code>. For more information on the Colt pub/sub system, see <a href="#pub-sub">the Pub/Sub section.</a></p>

<strong>Helpful Tip</strong>
<br>
<p>During development you can access the full list of available models via the <code>Colt.models</code> object.</p>

<a name="utils-dependencies"></a>
<hr>
<h2>Dependencies / Utils</h2>

<p>Dependencies or utilities passed into the modules are coded similar to the modules themselves. When the modules route is matched and its template is
loaded and rendered any dependencies are as well. If, for example, you wanted to create a simple object with messages to be utilized for output you could do the 
following:</p>

<pre><code data-language="javascript">define(function(){

    // Define the util as an object
    var messages = {

        'message_one': 'This is message one.',
        'message_two': 'This is message two.',
        'message_three': 'This is message three.'

    };

    // Return the object
    return messages;

});
</code></pre>

<p>The above will attach the <code>messages</code> object to the scope of the module for access. In the above instance the reference would be <code>this.messages</code> inside any methods of 
the module.</p>

<a name="access"></a>
<hr>
<h2>Cross-Module Access</h2>

<p>Colt includes the <code>access</code> method which allows access to other modules from within a parent module. The method is called by specifying the external module which then loads any dependencies/utilities and executes a callback with the return of the foreign module's <code>scope</code>. An example of usage is:</p>

<pre><code data-language="javascript">Colt.access('module_name', function(scope) {
    console.log(scope.property);
});
</code></pre>

<p>The above would simply log out a property of the specified module's scope.</p>

<a name="routing"></a>
<hr>
<h2>URI's, Hashes And Query String Data</h2>

<p>The framework adheres to Google's recommended <code>#!</code> convention. Using Colt's <code>navigate</code> method or specifying routes only the name needs to be specified, for example:</p>

<pre><code data-language="javascript">routes: {
    'route_to_module': 'renderModule'
}
</code></pre>

<p>Will load to <code>http://www.website.com/#!/route_to_module</code></p>

<p>Likewise, using the <code>navigate</code> function:</p>

<pre><code data-language="javascript">Colt.navigate('route_to_module');
</code></pre>

<p>Will point the route to the URL above.</p>

<p>Static (or globally utilized) modules can use the <code>*</code> character to denote usage throughout the application.</p>

<a name="passing-data"></a>
<br><br>
<h3>Passing Data</h3>

<p>The router will split off any data passed as slash-delimited strings after the initial fragment, For example:</p>

<pre><code data-language="html">http://www.website.com/#!/route_to_module/foo/bar</code></pre>

<p>Will populate the <code>url_data</code> object with:</p>

<pre><code data-language="javascript">{ 0: "foo", 1: "bar" }
</code></pre>

<p>The router will also split out any query string data. For example:</p>

<pre><code data-language="html">http://www.website.com/#!/route_to_module?foo=bar&amp;qux=baz
</code></pre>

<p>Will populate the <code>url_data</code> object with:</p>

<pre><code data-language="javascript">{ foo: "bar", qux: "baz" }
</code></pre>

<p>This data is available globally in the <code>Colt.url_data</code> object and is also passed back 
to the function called by the route, for instance if a route calls <code>renderModule</code>:</p>

<pre><code data-language="javascript">renderModule: function(url_data){
    // url_data is a proxy of 'Colt.url_data'...
}
</code></pre>

<p>Additionally data in both the path and querysting can be applied and accessed together, For instance:</p>

<pre><code data-language="html">http://www.website.com/#!/route_to_module/foo/bar?baz=quz&dolor=sit
</code></pre>

<p>Will populate the <code>url_data</code> object with:</p>

<pre><code data-language="javascript">{ 0: "foo", 1: "bar", baz: "quz", dolor: "sit" }
</code></pre>

<a name="events"></a>
<hr>
<h2>Events</h2>

<p>Events listeners are created using a simple structur similar to other frameworks:</p>

<pre><code data-language="javascript">events: {
    '{event} {object}': '{fn}'
}
</code></pre>

<p>So, for a click event you could specify <code>'click .something': 'doSomething'</code> which would fire the <code>doSomething</code> method and would return 
the event.</p>

<h3>Manual Binding</h3>

<p>Colt also includes a method for manually binding events:</p>

<pre><code data-language="javascript">Colt.bindEvent({dom_object}, {event}, function () {
    ... Code to Execute ...
});
</code></pre>

<a name="ajax"></a>
<hr>
<h2>AJAX Requests</h2>

<p>Colt includes a function to handle AJAX calls which is used by the core but can also be called manually:</p>

<pre><code data-language="javascript">Colt.ajax({
    url: 'path/to/resource',
    type: 'GET',
    async: true,
    cache: true,
    data: { foo: 'bar', baz: 'qux' },
    success: function(data, request){
        ...actions on success...
    },
    error: function(request){
        ...actions on error...
    }
});    
</code></pre>

<p>The only required property is <code>url</code>, which can also be submitted singularily in a similar method to jQuery's <code>$.ajax()</code> method. So, for instance both of the following would work:</p>

<pre><code data-language="javascript">Colt.ajax('path/to/resource');</code></pre>

<pre><code data-language="javascript">Colt.ajax({ url: 'path/to/resource' });</code></pre>

<h3>Pre-Defined Requests</h3>

<p>To assist in code reusability and maintainability, Colt includes a method for storing and calling ajax request:</p>

<pre><code data-language="javascript">Colt.request("request_name", { ...ajax params... });</code></pre>

<p>The above would create a pre-defined request with the ajax params specified, this could then be called with:</p>

<pre><code data-language="javascript">Colt.request("request_name").call({ ...data... });</code></pre>

<p>The above would call the request and pass in the supplied data. The <code>call()</code> method also (optionally) accepts custom <code>success</code> and <code>error</code> paramters:</p>

<pre><code data-language="javascript">Colt.request("request_name").call(
    { ...data... }, 
    function(returnData) {
        ...custom success handler...
    },
    function(errorData) {
        ...custom error handler...
    }
);</code></pre>

<p>Requests which are no longer used can be removed via:</p>

<pre><code data-language="javascript">Colt.request("request_name", null);</pre></code>

<strong>Helpful Tip</strong>
<br>
<p>During development you can access the full list of available requests via the <code>Colt.requests</code> object.</p>

<a name="persistent-storage"></a>
<hr>
<h2>Persistent Storage</h2>

<p>Colt includes support for persistent storage using <code>localStorage</code>, with a fallback to cookies for older browsers. The methods to utilize this are as follows: </p>

<p><strong>Create Storage Instance:</strong></p>

<pre><code data-language="javascript">Colt.store('some_key','some_value');
</code></pre>

<p><strong>Retrieve Storage Instance:</strong></p>

<pre><code data-language="javascript">Colt.store('some_key');
</code></pre>

<p><strong>Remove Storage Instance:</strong></p>

<pre><code data-language="javascript">Colt.store('some_key',null);
</code></pre>

<a name="pub-sub"></a>
<hr>
<h2>Pub/Sub</h2>

<p>Colt includes publish + subscribe functions to allow decoupling of events and facilitate interation between modules. The methods for pub/sub implementation are as follows:</p>

<p><strong>Subscribe:</strong></p>

<pre><code data-language="javascript">var token = Colt.subscribe('topic', function(args){
    ...function actions...
});
</code></pre>

<p><strong>Publish:</strong></p>

<pre><code data-language="javascript">Colt.publish('topic',args);
</code></pre>

<p><strong>Unsubscribe:</strong></p>

<pre><code data-language="javascript">Colt.unsubscribe(token);
</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38146932-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>